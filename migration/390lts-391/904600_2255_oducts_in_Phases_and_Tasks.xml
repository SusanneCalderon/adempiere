<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Migrations>
  <Migration EntityType="D" Name="Phase/Task Products in Project's Price List/PLVersion" ReleaseNo="" SeqNo="904600">
    <Comments> Allow only Products in Project Phases and Tasks which are in the Porject's Price List or Price List Version #2255
Issue https://github.com/adempiere/adempiere/issues/2255</Comments>
    <Step SeqNo="10" StepType="AD">
      <PO AD_Table_ID="108" Action="I" Record_ID="52664" Table="AD_Val_Rule">
        <Data AD_Column_ID="192" Column="Type">S</Data>
        <Data AD_Column_ID="586" Column="Updated">2019-01-16 21:41:22.91</Data>
        <Data AD_Column_ID="583" Column="IsActive">true</Data>
        <Data AD_Column_ID="584" Column="Created">2019-01-16 21:41:22.91</Data>
        <Data AD_Column_ID="193" Column="Code">p.M_Product_ID IN (
SELECT pp1.M_Product_ID
FROM M_ProductPrice pp1
INNER JOIN M_PriceList_Version plv1 on (pp1.M_PriceList_Version_ID=plv1.M_PriceList_Version_ID)
WHERE pp1.M_PriceList_Version_ID=@0|M_PriceList_Version_ID@
UNION
SELECT pp2.M_Product_ID
FROM M_ProductPrice pp2
INNER JOIN M_PriceList_Version plv2 on (pp2.M_PriceList_Version_ID=plv2.M_PriceList_Version_ID)
INNER JOIN M_PriceList plv on (plv2.M_PriceList_ID=plv.M_PriceList_ID)
WHERE plv.M_PriceList_ID=@0|M_PriceList_ID@
)</Data>
        <Data AD_Column_ID="188" Column="Name">MProduct Project</Data>
        <Data AD_Column_ID="189" Column="Description">Only products in Project's Price List or Price List Version</Data>
        <Data AD_Column_ID="387" Column="AD_Client_ID">0</Data>
        <Data AD_Column_ID="388" Column="AD_Org_ID">0</Data>
        <Data AD_Column_ID="187" Column="AD_Val_Rule_ID">52664</Data>
        <Data AD_Column_ID="7715" Column="EntityType">D</Data>
        <Data AD_Column_ID="587" Column="UpdatedBy">0</Data>
        <Data AD_Column_ID="585" Column="CreatedBy">0</Data>
        <Data AD_Column_ID="84460" Column="UUID" isNewNull="true"/>
      </PO>
    </Step>
    <Step SeqNo="20" StepType="AD">
      <PO AD_Table_ID="101" Action="U" Record_ID="8723" Table="AD_Column">
        <Data AD_Column_ID="115" Column="AD_Val_Rule_ID" oldValue="231">52664</Data>
      </PO>
    </Step>
    <Step SeqNo="30" StepType="AD">
      <PO AD_Table_ID="101" Action="U" Record_ID="8890" Table="AD_Column">
        <Data AD_Column_ID="115" Column="AD_Val_Rule_ID" oldValue="231">52664</Data>
      </PO>
    </Step>
  </Migration>
</Migrations>
